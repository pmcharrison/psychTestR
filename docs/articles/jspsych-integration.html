<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>jsPsych integration • psychTestR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="jsPsych integration">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">psychTestR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/hosting-experiments-online.html">Hosting experiments online</a>
    </li>
    <li>
      <a href="../articles/jspsych-integration.html">jsPsych integration</a>
    </li>
    <li>
      <a href="../articles/url-parameters.html">URL parameters</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/pmcharrison/psychTestR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>jsPsych integration</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pmcharrison/psychTestR/blob/master/vignettes/jspsych-integration.Rmd"><code>vignettes/jspsych-integration.Rmd</code></a></small>
      <div class="hidden name"><code>jspsych-integration.Rmd</code></div>

    </div>

    
    
<p><a href="https://www.jspsych.org/">jsPsych</a> is a powerful library for constructing behavioral experiments in Javascript. It is possible to embed jsPsych within psychTestR. This is useful when you want to take advantage of jsPsych’s timed stimulus presentation facilities.</p>
<p>psychTestR does not yet provide dedicated helper functions for embedding jsPsych, partly because of recent changes to jsPsych’s API. However, we give an example below of how this integration can be achieved. We intend to incorporate this functionality more explicitly into future releases of psychTestR.</p>
<p>If you have trouble getting the following to work, please contact Peter Harrison at <a href="mailto:pmc.harrison@gmail.com" class="email">pmc.harrison@gmail.com</a> - we’d appreciate a chance to update this documentation.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co">#' @param timeline Character string providing the jsPsych timeline (https://www.jspsych.org/overview/timeline/)</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co">#' @param plugins Character vector of paths to scripts containing jsPsych plugins to be loaded (https://www.jspsych.org/plugins/overview/)</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">#' @param jspsych File path of the jsPsych library file (see below)</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">#' @param jspsych_init File path to the jsPsych initialisation file (see below)</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#' @param jquery File path to the jQuery library file (see below)</span></a>
<a class="sourceLine" id="cb1-6" title="6">jspsych &lt;-<span class="st"> </span><span class="cf">function</span>(timeline, plugins, jspsych, jspsych_init, jquery) {</a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="cf">for</span> (s <span class="cf">in</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(plugins, jspsych, jspsych_init, jquery)) </a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/files">file.exists</a></span>(s)) <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/stop">stop</a></span>(<span class="st">"couldn't find script "</span>, s)</a>
<a class="sourceLine" id="cb1-9" title="9">  psychTestR<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/psychTestR/topics/page">page</a></span>(</a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="dt">ui =</span> shiny<span class="op">::</span>tags<span class="op">$</span><span class="kw">div</span>(</a>
<a class="sourceLine" id="cb1-11" title="11">      shiny<span class="op">::</span>tags<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(jspsych, jquery, plugins), shiny<span class="op">::</span>includeScript)),</a>
<a class="sourceLine" id="cb1-12" title="12">      shiny<span class="op">::</span>tags<span class="op">$</span><span class="kw">script</span>(timeline),</a>
<a class="sourceLine" id="cb1-13" title="13">      shiny<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/shiny/topics/include">includeScript</a></span>(jspsych_init),</a>
<a class="sourceLine" id="cb1-14" title="14">      shiny<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/shiny/topics/builder">div</a></span>(<span class="dt">id =</span> <span class="st">"js_psych"</span>)),</a>
<a class="sourceLine" id="cb1-15" title="15">    <span class="dt">get_answer =</span> <span class="cf">function</span>(input, ...) input<span class="op">$</span>jspsych_results,</a>
<a class="sourceLine" id="cb1-16" title="16">    <span class="dt">validate =</span> <span class="cf">function</span>(answer, ...) <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nchar">nchar</a></span>(answer <span class="op">&gt;</span><span class="st"> </span>0L),</a>
<a class="sourceLine" id="cb1-17" title="17">    <span class="dt">save_answer =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb1-18" title="18">  )</a>
<a class="sourceLine" id="cb1-19" title="19">}</a></code></pre></div>
<div id="jspsych-library-file" class="section level2">
<h2 class="hasAnchor">
<a href="#jspsych-library-file" class="anchor"></a>jsPsych library file</h2>
<p>This core part of the jsPsych installation can be found here: <a href="https://github.com/jspsych/jsPsych" class="uri">https://github.com/jspsych/jsPsych</a></p>
</div>
<div id="jspsych-initialization-file" class="section level2">
<h2 class="hasAnchor">
<a href="#jspsych-initialization-file" class="anchor"></a>jsPsych initialization file</h2>
<p>This is the <code>jspsych_init</code> file of the <code>jspsych</code> function above.</p>
<p>This file should look something like this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="va">jsPsych</span>.<span class="at">init</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="dt">display_element</span><span class="op">:</span> <span class="at">$</span>(<span class="st">'#js_psych'</span>)<span class="op">,</span> <span class="co">// some versions of jsPsych</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="co">// display_element: 'js_psych', // other versions of jsPsych</span></a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="dt">fullscreen</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="dt">timeline</span><span class="op">:</span> timeline<span class="op">,</span></a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="dt">on_finish</span><span class="op">:</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/function">function</a></span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-7" title="7">    <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/cor">var</a></span> json_data <span class="op">=</span> <span class="va">jsPsych</span>.<span class="va">data</span>.<span class="at">dataAsJSON</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb2-8" title="8">    <span class="va">Shiny</span>.<span class="at">onInputChange</span>(<span class="st">"jspsych_results"</span><span class="op">,</span> json_data)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-9" title="9">    <span class="at">next_page</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb2-10" title="10">    <span class="co">// jsPsych.data.displayData();</span></a>
<a class="sourceLine" id="cb2-11" title="11">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Depending on the version of jsPsych the definition of <code>display_element</code> needs to change slightly, according to the comments above.</p>
</div>
<div id="jquery" class="section level2">
<h2 class="hasAnchor">
<a href="#jquery" class="anchor"></a>jQuery</h2>
<p>The jQuery library file can be downloaded from here: <a href="https://jquery.com/download/" class="uri">https://jquery.com/download/</a> Later versions of jsPsych may not need jQuery to be loaded.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#jspsych-library-file">jsPsych library file</a></li>
      <li><a href="#jspsych-initialization-file">jsPsych initialization file</a></li>
      <li><a href="#jquery">jQuery</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Peter M. C. Harrison.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
